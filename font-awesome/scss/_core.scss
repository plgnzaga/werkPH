<?php 
include_once 'dbconfig.php';

class Crud extends DbConfig{

	public function __construct()
    {
        parent::__construct();
    }
	

	public function getData($query){
		$result = $this->connection->query($query);

		if($result == false){
			return false;
		}

		$rows = array();

		while($row = $result->fetch_assoc()){
			$rows[]=$row;
		}
		return $rows;
	}

	public function exec($query){
		$result = $this->connection->query($query);

		if($result==false){
			echo "Command Cannot be executed";
			return false;
		}
		else{
			return true;
		}
	}

	public function sanitate($value){
		return $this->connection->real_escape_string($value);
	}

	public function check_login($username,$pwd){
		$login_me = "SELECT * FROM applicants WHERE username = '$username' AND pwd = '$pwd' ";

		$res = mysqli_query($this->connection,$login_me);
		$applicant_data = mysqli_fetch_array($res);
		$count_row = $res->num_rows;

		if($count_row==1){
			$_SESSION['login']="true";
			$_SESSION['uid'] = $applicant_data['uid'];
		}
		else{
			echo "Cannot Log in";
		}
	}




} //end class

?>